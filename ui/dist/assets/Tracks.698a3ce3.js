import{P as k,F as b,G as D,A as P,E as w}from"./AddSong.b62856ab.js";import{_ as x,H,r as d,k as S,o as c,c as h,j as y,n as T,w as C,e as I,a,t as $,F as E,g as L,p as N,b as B,d as F,f as M}from"./index.03b33f2e.js";import"./FindSources.454cd6eb.js";new H("reapOne.playlist",22);const V={components:{PlaylistEntry:k,FixedPlaylistHeader:b,GridHeader:D,AddSong:P,EditPlaylist:w},name:"LikedSongs",props:{authorised:Boolean,userData:Object},data(){return{fixedHeaderHidden:!0}},computed:{rawPlaylists(){var s,e;return((e=(s=this.userData)==null?void 0:s.data)==null?void 0:e.playlists)||[]},likedTracks(){return console.log(this.rawPlaylists),this.rawPlaylists.map(s=>s.songs).flat().filter(s=>s.favourite==1)},autogeneratedDescription(){var s,e,i;return`${(i=(e=(s=this.userData)==null?void 0:s.user)==null?void 0:e.userinfo)==null?void 0:i.name} \u2022 ${this.likedTracks.length} ${this.likedTracks.length==1?"song":"songs"}, ${this.estimatedDuration}`},estimatedDuration(){let s=0,e=!1;for(const n of this.likedTracks){e=e||n.duration=="-1:59";const u=n.duration=="-1:59"?"3:00":n.duration,[p,_]=u.split(":");s+=Number(p*60)+Number(_)}const i=s,o=Math.floor(i/60),l=Math.floor(o/60),r=e?"about ":"";return l?r+`${l} hr ${o-l*60} min`:o?r+`${o} min ${i-o*60} sec`:r+s+" sec"}},methods:{headerVisibilityChanged(s){this.fixedHeaderHidden=s},updateData(s){var e;if(s.path=="player.song"){let i=((e=s==null?void 0:s.data)==null?void 0:e.title)||"N/A";for(const o of this.playlist)o.playing=o.title==i}}}},f=s=>(N("data-v-7fa56ba8"),s=s(),B(),s),A={class:"playlist"},q={class:"padding-20 playlisteditor"},G=M("Playlist"),O=f(()=>a("h1",null,"Liked Songs",-1)),R={class:"muted description"},U={class:"mobileMenu showIfMobile"},z=f(()=>a("hr",null,null,-1)),J={class:"padding-20"},K={class:"grid"},Q=f(()=>a("hr",null,null,-1)),W={class:"playlistEntries"};function X(s,e,i,o,l,r){const n=d("fixed-playlist-header"),u=d("h7"),p=d("grid-header"),_=d("playlist-entry"),g=S("observe-visibility");return c(),h("div",A,[y(n,{onLoadPlaylist:s.loadPlaylist,ref:"fixedHeading",class:T({hidden:l.fixedHeaderHidden}),title:"Liked Songs"},null,8,["onLoadPlaylist","class"]),C((c(),h("div",q,[y(u,null,{default:I(()=>[G]),_:1}),O,a("p",R,$(r.autogeneratedDescription),1)])),[[g,r.headerVisibilityChanged]]),a("div",U,[a("span",{onClick:e[0]||(e[0]=()=>s.$emit("toggleFullSidebar")),class:"material-symbols-rounded"},"menu")]),z,a("div",J,[a("span",{id:"loadPlaylist",onClick:e[1]||(e[1]=(...t)=>s.loadPlaylist&&s.loadPlaylist(...t)),class:"material-symbols-rounded"},"play_circle"),a("div",K,[y(p,{class:"hideIfMobile"}),Q,a("div",W,[(c(!0),h(E,null,L(r.likedTracks,(t,m)=>(c(),F(_,{onDownload:s.download,key:m,onRequestUpdate:s.updatePlaylist,userData:i.userData,index:r.likedTracks.findIndex(v=>v.source==t.source),source:t.source,playing:t.playing,id:t.id,title:t.title,album:t.album,artist:t.artist,cover:t.cover,favourite:t.favourite,duration:t.duration},null,8,["onDownload","onRequestUpdate","userData","index","source","playing","id","title","album","artist","cover","favourite","duration"]))),128))])])])])}var ss=x(V,[["render",X],["__scopeId","data-v-7fa56ba8"]]);export{ss as default};
