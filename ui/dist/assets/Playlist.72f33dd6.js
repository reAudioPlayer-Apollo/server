import{P as N,F as x,G as I,A as w,E as S}from"./AddSong.28dda279.js";import{_ as C,H,r,j as k,o as u,c as p,i as n,n as A,k as O,w as E,a as o,t as c,F as T,e as B,p as F,b as M,d as V,f as L}from"./index.74aa632f.js";const R=new H("reapOne.playlist",22),q={components:{PlaylistEntry:N,FixedPlaylistHeader:x,GridHeader:I,AddSong:w,EditPlaylist:S},name:"Playlist",props:{authorised:Boolean,userData:Object},data(){var a,i,y;if(this.updatePlaylist(),!this.getId()||!this.$route.path.includes("/playlist/"))return;const t=(y=(i=(a=this.userData)==null?void 0:a.data)==null?void 0:i.playlists)==null?void 0:y[Number(this.getId())],s=(t==null?void 0:t.songs)||[],l=(t==null?void 0:t.name)||"N/A",d=(t==null?void 0:t.description)||"";return document.title=`${l} - reAudioPlayer One`,{fixedHeaderHidden:!0,playlist:s,playlistName:l,playlistDescription:d}},methods:{getId(){return R.decode(this.$route.params.id)},download(t){var l;const s=(l=this.playlist)==null?void 0:l[t];window.open("/api/download/"+s.id)},updatePlaylist(){var s,l,d;if(!this.getId()||!this.$route.path.includes("/playlist/"))return;const t=(d=(l=(s=this.userData)==null?void 0:s.data)==null?void 0:l.playlists)==null?void 0:d[Number(this.getId())];this.playlist=(t==null?void 0:t.songs)||[],this.playlistName=(t==null?void 0:t.name)||"N/A",this.playlistDescription=(t==null?void 0:t.description)||"",document.title=`${this.playlistName} - reAudioPlayer One`},onPlaylistRearrange(t){const s=t.moved;!s||fetch("/api/rearrange",{method:"POST",body:JSON.stringify({playlistIndex:Number(this.getId()),songOldIndex:s.oldIndex,songNewIndex:s.newIndex})})},headerVisibilityChanged(t){this.fixedHeaderHidden=t},updateData(t){var s;if(t.path=="player.song"){let l=((s=t==null?void 0:t.data)==null?void 0:s.title)||"N/A";for(const d of this.playlist)d.playing=d.title==l}},loadPlaylist(){fetch("/api/loadPlaylist",{method:"POST",body:JSON.stringify({id:Number(this.getId()),type:"playlist"})})},addToPlaylist(){this.$refs.addSongPopup.showModal=!0},editPlaylist(){this.$refs.editPlaylistPopup.showModal=!0}},watch:{$route(){this.updatePlaylist()},userData(){this.updatePlaylist()}}},h=t=>(F("data-v-2a2fa0b8"),t=t(),M(),t),G={class:"playlist"},J=L("Playlist"),U={class:"mobileMenu showIfMobile"},z=h(()=>o("hr",null,null,-1)),K={class:"padding-20"},Q={class:"grid"},W=h(()=>o("hr",null,null,-1)),X={class:"playlistEntries"};function Y(t,s,l,d,a,i){const y=r("AddSong"),_=r("EditPlaylist"),P=r("fixed-playlist-header"),m=r("h7"),f=r("grid-header"),g=r("playlist-entry"),v=k("observe-visibility");return u(),p("div",G,[n(y,{onClose:i.updatePlaylist,ref:"addSongPopup",userData:l.userData},null,8,["onClose","userData"]),n(_,{onClose:i.updatePlaylist,playlistName:a.playlistName,playlistDescription:a.playlistDescription,ref:"editPlaylistPopup",userData:l.userData},null,8,["onClose","playlistName","playlistDescription","userData"]),n(P,{onLoadPlaylist:i.loadPlaylist,ref:"fixedHeading",class:A({hidden:a.fixedHeaderHidden}),title:a.playlistName},null,8,["onLoadPlaylist","class","title"]),O((u(),p("div",{class:"padding-20 playlisteditor",onClick:s[0]||(s[0]=(...e)=>i.editPlaylist&&i.editPlaylist(...e))},[n(m,null,{default:E(()=>[J]),_:1}),o("h1",null,c(a.playlistName),1),o("h5",null,c(a.playlistDescription),1)])),[[v,i.headerVisibilityChanged]]),o("div",U,[o("span",{onClick:s[1]||(s[1]=()=>t.$emit("toggleFullSidebar")),class:"material-symbols-rounded"},"menu")]),z,o("div",K,[o("span",{id:"loadPlaylist",onClick:s[2]||(s[2]=(...e)=>i.loadPlaylist&&i.loadPlaylist(...e)),class:"material-symbols-rounded"},"play_circle_filled"),o("span",{id:"addToPlaylist",onClick:s[3]||(s[3]=(...e)=>i.addToPlaylist&&i.addToPlaylist(...e)),class:"material-symbols-rounded"},"add_circle"),o("div",Q,[n(f,{class:"hideIfMobile"}),W,o("div",X,[(u(!0),p(T,null,B(a.playlist,(e,b)=>(u(),V(g,{onDownload:i.download,key:b,onRequestUpdate:i.updatePlaylist,userData:l.userData,index:a.playlist.findIndex(D=>D.source==e.source),source:e.source,playing:e.playing,id:e.id,title:e.title,album:e.album,artist:e.artist,cover:e.cover,favourite:e.favourite,duration:e.duration},null,8,["onDownload","onRequestUpdate","userData","index","source","playing","id","title","album","artist","cover","favourite","duration"]))),128))])])])])}var j=C(q,[["render",Y],["__scopeId","data-v-2a2fa0b8"]]);export{j as default};
