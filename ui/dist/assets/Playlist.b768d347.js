import{P as x,F as N,G as I,A as w,E as S}from"./AddSong.fe6ef212.js";import{_ as C,H,r as n,j as k,o as p,c as u,i as r,n as O,k as A,w as E,a as d,t as c,F as T,e as B,p as F,b as M,d as V,f as L}from"./index.0e559d35.js";const R=new H("reapOne.playlist",22),q={components:{PlaylistEntry:x,FixedPlaylistHeader:N,GridHeader:I,AddSong:w,EditPlaylist:S},name:"Playlist",props:{authorised:Boolean,userData:Object},data(){var a,i,y;if(this.updatePlaylist(),!this.getId()||!this.$route.path.includes("/playlist/"))return;const t=(y=(i=(a=this.userData)==null?void 0:a.data)==null?void 0:i.playlists)==null?void 0:y[Number(this.getId())];document.title=`${this.playlistName} - reAudioPlayer One`;const s=t.songs,l=t.name,o=t.description;return{fixedHeaderHidden:!0,playlist:s,playlistName:l,playlistDescription:o}},methods:{getId(){return R.decode(this.$route.params.id)},download(t){var l;const s=(l=this.playlist)==null?void 0:l[t];window.open("/api/download/"+s.id)},updatePlaylist(){var s,l,o;if(!this.getId()||!this.$route.path.includes("/playlist/"))return;const t=(o=(l=(s=this.userData)==null?void 0:s.data)==null?void 0:l.playlists)==null?void 0:o[Number(this.getId())];document.title=`${this.playlistName} - reAudioPlayer One`,this.playlist=t.songs,this.playlistName=t.name,this.playlistDescription=t.description},onPlaylistRearrange(t){const s=t.moved;!s||fetch("/api/rearrange",{method:"POST",body:JSON.stringify({playlistIndex:Number(this.getId()),songOldIndex:s.oldIndex,songNewIndex:s.newIndex})})},headerVisibilityChanged(t){this.fixedHeaderHidden=t},updateData(t){var s;if(t.path=="player.song"){let l=((s=t==null?void 0:t.data)==null?void 0:s.title)||"N/A";for(const o of this.playlist)o.playing=o.title==l}},loadPlaylist(){fetch("/api/loadPlaylist",{method:"POST",body:JSON.stringify({id:Number(this.getId()),type:"playlist"})})},addToPlaylist(){this.$refs.addSongPopup.showModal=!0},editPlaylist(){this.$refs.editPlaylistPopup.showModal=!0}},watch:{$route(){this.updatePlaylist()}}},h=t=>(F("data-v-10f22a89"),t=t(),M(),t),G={class:"playlist"},J=L("Playlist"),U={class:"mobileMenu showIfMobile"},z=h(()=>d("hr",null,null,-1)),K={class:"padding-20"},Q={class:"grid"},W=h(()=>d("hr",null,null,-1)),X={class:"playlistEntries"};function Y(t,s,l,o,a,i){const y=n("AddSong"),_=n("EditPlaylist"),m=n("fixed-playlist-header"),P=n("h7"),f=n("grid-header"),g=n("playlist-entry"),v=k("observe-visibility");return p(),u("div",G,[r(y,{onClose:i.updatePlaylist,ref:"addSongPopup",userData:l.userData},null,8,["onClose","userData"]),r(_,{onClose:i.updatePlaylist,playlistName:a.playlistName,playlistDescription:a.playlistDescription,ref:"editPlaylistPopup",userData:l.userData},null,8,["onClose","playlistName","playlistDescription","userData"]),r(m,{onLoadPlaylist:i.loadPlaylist,ref:"fixedHeading",class:O({hidden:a.fixedHeaderHidden}),title:a.playlistName},null,8,["onLoadPlaylist","class","title"]),A((p(),u("div",{class:"padding-20 playlisteditor",onClick:s[0]||(s[0]=(...e)=>i.editPlaylist&&i.editPlaylist(...e))},[r(P,null,{default:E(()=>[J]),_:1}),d("h1",null,c(a.playlistName),1),d("h5",null,c(a.playlistDescription),1)])),[[v,i.headerVisibilityChanged]]),d("div",U,[d("span",{onClick:s[1]||(s[1]=()=>t.$emit("toggleFullSidebar")),class:"material-symbols-rounded"},"menu")]),z,d("div",K,[d("span",{id:"loadPlaylist",onClick:s[2]||(s[2]=(...e)=>i.loadPlaylist&&i.loadPlaylist(...e)),class:"material-symbols-rounded"},"play_circle_filled"),d("span",{id:"addToPlaylist",onClick:s[3]||(s[3]=(...e)=>i.addToPlaylist&&i.addToPlaylist(...e)),class:"material-symbols-rounded"},"add_circle"),d("div",Q,[r(f,{class:"hideIfMobile"}),W,d("div",X,[(p(!0),u(T,null,B(a.playlist,(e,b)=>(p(),V(g,{onDownload:i.download,key:b,onRequestUpdate:i.updatePlaylist,userData:l.userData,index:a.playlist.findIndex(D=>D.source==e.source),source:e.source,playing:e.playing,id:e.id,title:e.title,album:e.album,artist:e.artist,cover:e.cover,favourite:e.favourite,duration:e.duration},null,8,["onDownload","onRequestUpdate","userData","index","source","playing","id","title","album","artist","cover","favourite","duration"]))),128))])])])])}var $=C(q,[["render",Y],["__scopeId","data-v-10f22a89"]]);export{$ as default};
